<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8">
		<title>Nothing Works</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Alegreya:ital@1&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Alegreya:ital@1&family=Lato:wght@300;400&display=swap');
      
      #nw-lyric.animate__animated.animate__fadeOut {
        --animate-duration: 2.4s;
      }
      
      .animate__animated.animate__fadeOut {
        --animate-duration: 3.9s;
      }
      
      .container {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        display: grid;
      }
      
      .center {
        margin: auto;
      }
      
      .lyric {
        font-family: "Alegreya";	/* can change */
        font-size: 17px;
        text-align: center;
        color: #fff;
      }
      
      #nw-input {
        margin-top: -10px;
        margin-bottom: 45px;
        font-family: "Lato";
        padding: 2px 4px;
        text-transform: uppercase;
      }
      
      #nw-input:focus {
        outline: none !important;
        border-radius: 3px;
        border: 1.5px solid #dedede; /* can be other colors */
      }
      
      .chorus {
        animation: .1s shake 39 alternate;
      }

      @keyframes shake {
        0% { transform: skewX(-25deg); }
        5% { transform: skewX(25deg); }
        10% { transform: skewX(-25deg); }
        15% { transform: skewX(25deg); }
        20% { transform: skewX(0deg); }
        100% { transform: skewX(0deg); }  
      }
    </style>
	</head>
  
	<body>
    <audio id="clip-1" src="clip-1.mp3"></audio>
    <audio id="clip-2" src="clip-2.mp3"></audio>
    
    <div id="bg" class="container"></div>
    <div id="main" class="container" style="background-color: #fff">
      <div class="center">
				<p id="nw-lyric" class="lyric" style="color: #000; display: block">"nothing works"</p>
        <input type="text" id="nw-input" size="16" autocomplete="on" style="display: block">
        <p class="lyric" style="display: none">nothing works for everyone</p>
        <p class="lyric" style="display: none">good stories are bad lives</p>
        <p class="lyric" style="display: none">good stories are bad lives...</p>
        <p class="lyric chorus" style="display: none">take your hands off your neck and</p>
				<p class="lyric chorus" style="display: none">hold onto the ghost of my body</p>
        <p class="lyric chorus" style="display: none">you know that good lives make bad stories</p>
        <p class="lyric chorus" style="display: none">you can text me!</p>
        <p class="lyric chorus" style="display: none">when punching matresses get old</p>
        <p class="lyric chorus" style="display: none">don't think it'll always be this way</p>
        <p class="lyric chorus" style="display: none">not comforted by anything I say</p>
				<input type="text" id="www-input" size="56" autocomplete="on" style="display: none">
      </div>
    </div>	
	</body>
  
  <script>
    // make lyrics appear randomly
    // put audio in
    let clip1 = document.getElementById("clip-1")
    let clip2 = document.getElementById("clip-2")
    
    let bg = document.getElementById("bg")
  	let main = document.getElementById("main")
    
    let nwInput = document.getElementById("nw-input")
    let nwLyric = document.getElementById("nw-lyric")
    let lyrics = document.getElementsByClassName("lyric")
    
    function fadeOut(lyric, timeout) {
      lyric.style.display = "block"
      lyric.classList.add("animate__animated")
      lyric.classList.add("animate__fadeOut")
      setTimeout(function() {lyric.style.display = "none"}, timeout)
    }
    
    function nothingWorks() {
      clip1.play()
      main.style.backgroundColor = "#000" 
      nwLyric.style.display = "none"
      nwLyric.innerText = "nothing works"
      nwLyric.style.color = "#fff"
      nwInput.style.display = "none"
      setTimeout(fadeOut, 1000, lyrics.item(0), 2400)
      setTimeout(fadeOut, 3500, lyrics.item(1), 3900) 
      setTimeout(fadeOut, 7500, lyrics.item(2), 3900)
      setTimeout(fadeOut, 11500, lyrics.item(3), 4500)
      setTimeout(fadeOut, 17500, lyrics.item(4), 1900)
      setTimeout(fadeOut, 19500, lyrics.item(5), 3400)
      setTimeout(fadeOut, 23000, lyrics.item(6), 4400)
      setTimeout(fadeOut, 28000, lyrics.item(7), 1900)
      setTimeout(fadeOut, 30000, lyrics.item(8), 1900)
      setTimeout(fadeOut, 32000, lyrics.item(9), 4400)
      setTimeout(fadeOut, 36500, lyrics.item(10), 3900)
    }
    
    // helper functions
    
    function createImg(name, width, x, y, z) {
      let img = document.createElement("img")
      img.src = name
      main.appendChild(img)
      img.style.position = "absolute"
      img.style.width = width
      img.style.left = x
      img. style.top = y
      img.style.zIndex = z 
      return img
    }
    
    function createGif(name, width, x, y, z) {
      const gif = document.createElement("img")
      gif.src = name
      gif.width = width
      bg.appendChild(gif)
      gif.style.position = "absolute"
      gif.style.left = x + "px"
      gif.style.top = y + "px"
      gif.style.zIndex = z
    }
    
    // animateStar
     
    function animateStar() {
      for (let r = 0; r < window.innerHeight / 150; r++) {
        for (let c = 0; c < window.innerWidth / 150; c++) {
          const x = c * 150;
          const y = r * 120;
          createImg("star.gif", 100, x, y, 0)
        }
      }
      for (let i = 0; i < 60; i++) {
        let x = Math.random() * window.innerWidth
        let y = Math.random() * window.innerHeight
        createImg("star.gif", 100, x, y, 0)
      }
    }
    
    // animateStar()
    
    // animateRain
    
    function createRain() {
      for (let i = 0; i < 100; i++) {
        let x = Math.random() * window.innerWidth
        let y = Math.random() * (window.innerHeight) - 150
        createGif("rain.gif", 300, x, y, 1) // 0.9s duration, create div that makes it random one after another
      }
      setTimeout(function() {bg.innerHTML = ""}, 900)
    }
    
    function animateRain() {
      for (let i = 1; i < 5; i++) {
        setTimeout(createRain, i * 1000)
      }
    }
    
    // animateRain()
    
    // animateMan
    
    let manW = 60
    let manH = manW * 4 / 3
    let man1 = createImg("man-1.png", manW, 0, 0, 0)
    
    let man2 = createImg("man-2.png", manW, window.innerWidth - manW, window.innerHeight - manH, 0)
    
    let vx1 = 1
    let vy1 = 1
    
    let vx2 = 1
    let vy2 = 1
    
    let x1 = 0
    let y1 = 0
    
    function animateMan1() {
      requestAnimationFrame(animateMan1) 
      
      let topScrn = 0
      let bottomScrn = window.innerHeight - manH
      
      let leftScrn = 0
      let rightScrn = window.innerWidth / 2 - manW - 10
      
      if (x1 < leftScrn || x1 > rightScrn) {
        vx1 = -vx1
      }
      
      if (y1 < topScrn || y1 > bottomScrn) { 
        vy1 = -vy1
      } 
      
      x1 += vx1
      y1 += vy1
      
      man1.style.left = x1 + "px"
      man1.style.top = y1 + "px"
    }
    
    let x2 = window.innerWidth - manW
    let y2 = window.innerHeight - manH
    
    function animateMan2() {
      requestAnimationFrame(animateMan2) 
      
      let topScrn = 0
      let bottomScrn = window.innerHeight - manH
      
      let leftScrn = window.innerWidth / 2 - manW + (manW + 10)
      let rightScrn = window.innerWidth - manW
      
      if (x2 < leftScrn || x2 > rightScrn) {
        vx2 = -vx2
      }
       
      if (y2 < topScrn || y2 > bottomScrn) { 
        vy2 = -vy2
      } 
      
      x2 += vx2
      y2 += vy2
      
      man2.style.left = x2 + "px"
      man2.style.top = y2 + "px"
    }
    
    // animateMan1()
    // animateMan2()
    
    window.addEventListener("keypress", function(event) {
      if (event.keyCode === 13 && nwInput.value.toLowerCase() === "nothing works") {
        nothingWorks()
      }
    })
    
    // also for resize
    
  </script>
</html>